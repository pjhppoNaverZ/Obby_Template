fileFormatVersion: 2
guid: 8ead314104c646044ba6fa308c44e065
importerOverride: ZEPETO.Script.Compiler:ZEPETO.Script:TypescriptAssetImporter
ScriptedImporter:
  internalIDToNameTable: []
  externalObjects: {}
  serializedVersion: 2
  userData: 
  assetBundleName: 
  assetBundleVariant: 
  script: {fileID: -1123457745, guid: 54cf806323ffe4418a4ce4cc63fe6b9d, type: 3}
  isAssemblyDeclarations: 0
  assembly: 
  generateAllTypes: 1
  types: []
  generateWrapper: 0
  overrideWrapperTypes: 0
  wrapperTypes: []
  WrapperFilters: []
  wrapperOutputDirectory: Generated
  compiledResult: '{"source":"\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\",
    { value: true });\r\nconst __UnityEngine__ = require(\"UnityEngine\");\r\nconst
    UnityEngine_1 = require(\"UnityEngine\");\r\nconst ZEPETO_Script_1 = require(\"ZEPETO.Script\");\r\nconst
    WorldState_1 = require(\"../Managers/WorldState\");\r\nclass FallPlatform extends
    ZEPETO_Script_1.ZepetoScriptBehaviour {\r\n    constructor() {\r\n        super(...arguments);\r\n       
    this.fallDelay = 1; // Time it takes to start falling\r\n        this.respawnDelay
    = 3; // Time it takes to respawn\r\n    }\r\n    // Start is called on the frame
    when a script is enabled just before any of the Update methods is called the
    first time\r\n    Start() {\r\n        // We save the initial position of the
    platform\r\n        this._initPos = this.transform.position;\r\n    }\r\n   
    // If the platform detects the collision with the player, it calls the method
    to fall\r\n    // https://docs.unity3d.com/ScriptReference/Collider.OnTriggerEnter.html\r\n   
    OnTriggerEnter(collider) {\r\n        // Check if the \"zepetoCharacter\" of
    the GameSettings instance is null or if the gameobject of the collider is not
    him and return\r\n        if (WorldState_1.default.Instance.zepetoCharacter ==
    null || __UnityEngine__.Object.op_Inequality(collider.gameObject, WorldState_1.default.Instance.zepetoCharacter.gameObject))\r\n           
    return;\r\n        // Check if the internal variable \"_falling\" is false\r\n       
    if (!this._falling && this._coFallPlatform == null) {\r\n            // Set the
    internal variable \"_falling\" on true\r\n            this._falling = true;\r\n           
    this._coFallPlatform = this.StartCoroutine(this.CoFallPlatform());\r\n           
    this.StartCoroutine(this.CoRespawnPlatform());\r\n            // DEV NOTE: \r\n           
    // Using an Invoke instead of a direct call, allows us to add a delay for its
    execution\r\n        }\r\n    }\r\n    // This method causes the platform to
    start falling\r\n    *CoFallPlatform() {\r\n        yield new UnityEngine_1.WaitForSeconds(this.fallDelay);\r\n       
    while (this._falling) {\r\n            this.transform.Translate(0, -0.5, 0);\r\n           
    yield null;\r\n        }\r\n    }\r\n    // This method is responsible for returning
    the platform to its initial state\r\n    *CoRespawnPlatform() {\r\n        yield
    new UnityEngine_1.WaitForSeconds(this.respawnDelay);\r\n        // We set the
    flag of is falling on false\r\n        this._falling = false;\r\n        // Set
    the rotation of the transform to zero\r\n        this.transform.rotation = UnityEngine_1.Quaternion.Euler(0,
    0, 0);\r\n        // Set the position into the exact same position at start\r\n       
    this.transform.position = this._initPos;\r\n        this._coFallPlatform = null;\r\n   
    }\r\n}\r\nexports.default = FallPlatform;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRmFsbFBsYXRmb3JtLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiRmFsbFBsYXRmb3JtLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLDZDQUF1RjtBQUN2RixpREFBc0Q7QUFDdEQsdURBQWdEO0FBRWhELE1BQXFCLFlBQWEsU0FBUSxxQ0FBcUI7SUFBL0Q7O1FBRVMsY0FBUyxHQUFXLENBQUMsQ0FBQyxDQUFDLGlDQUFpQztRQUN4RCxpQkFBWSxHQUFXLENBQUMsQ0FBQyxDQUFDLDJCQUEyQjtJQTREOUQsQ0FBQztJQXREQyx1SEFBdUg7SUFDdkgsS0FBSztRQUNILCtDQUErQztRQUMvQyxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDO0lBQzFDLENBQUM7SUFFRCxxRkFBcUY7SUFDckYsd0VBQXdFO0lBQ3hFLGNBQWMsQ0FBQyxRQUFrQjtRQUMvQixpSUFBaUk7UUFDakksSUFBSSxvQkFBVSxDQUFDLFFBQVEsQ0FBQyxlQUFlLElBQUksSUFBSSwyQkE0Q2t0UixhQUFjLENBNUM1dFIsUUFBUSxDQUFDLFVBQVUsRUFBSSxvQkFBVSxDQUFDLFFBQVEsQ0FBQyxlQUFlLENBQUMsVUFBVSxDQUFBO1lBQ3RILE9BQU87UUFFVCxxREFBcUQ7UUFDckQsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLElBQUksSUFBSSxDQUFDLGVBQWUsSUFBSSxJQUFJLEVBQUU7WUFDbEQsK0NBQStDO1lBQy9DLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1lBRXJCLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsY0FBYyxFQUFFLENBQUMsQ0FBQztZQUNsRSxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7WUFFOUMsYUFBYTtZQUNiLHVGQUF1RjtTQUN4RjtJQUVILENBQUM7SUFFRCxtREFBbUQ7SUFDbkQsQ0FBQyxjQUFjO1FBRWIsTUFBTSxJQUFJLDRCQUFjLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBRXpDLE9BQU8sSUFBSSxDQUFDLFFBQVEsRUFBRTtZQUNwQixJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDckMsTUFBTSxJQUFJLENBQUM7U0FDWjtJQUNILENBQUM7SUFFRCw2RUFBNkU7SUFDN0UsQ0FBQyxpQkFBaUI7UUFDaEIsTUFBTSxJQUFJLDRCQUFjLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBRTVDLHlDQUF5QztRQUN6QyxJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztRQUV0Qiw0Q0FBNEM7UUFDNUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLEdBQUcsd0JBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUVwRCx5REFBeUQ7UUFDekQsSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQztRQUV4QyxJQUFJLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQztJQUM5QixDQUFDO0NBRUY7QUEvREQsK0JBK0RDIn0=","assetPath":"Assets/StaticResources/Scripts/Platforms/FallPlatform.ts","manifest":{"properties":[{"assembly":"mscorlib","name":"fallDelay","type":"System.Single","isArray":false,"initValue":["1"],"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"mscorlib","name":"respawnDelay","type":"System.Single","isArray":false,"initValue":["3"],"enumKeys":[],"enumValues":[],"attributes":[]}],"name":"FallPlatform","description":"","hasAnimatorMove":false},"isCompiled":true}'
  typescriptHash: 6c6224d7b26f18c64d9d8237712c719d
  onlyWriteTrigger: 0
